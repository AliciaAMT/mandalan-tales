<div
  class="main-game-responsive-grid"
  [ngStyle]="{
    'grid-template-rows': gridTemplateRows,
    'grid-template-columns': gridTemplateColumns,
    'grid-template-areas': gridTemplateAreas
  }"
>
  <!-- Player Stats (Left/Top) -->
  <div class="main-section player-stats" [ngClass]="{'collapsed': !isPlayerStatsOpen}" [style.grid-area]="playerStatsArea">
    <button class="collapsible-header" (click)="togglePlayerStats()">Player Stats</button>
    <div class="section-content" *ngIf="isPlayerStatsOpen">
      <ng-container *ngIf="currentCharacter; else noChar">
        <div class="player-stats-list">
          <div class="player-stats-row">
            <img class="stat-icon portrait" [src]="'assets/portraits/transparent/' + currentCharacter.portrait + '.png'" alt="Portrait" />
            <div>
              <strong>{{ currentCharacter.name }}</strong>
              <span *ngIf="currentCharacter.title">({{ currentCharacter.title }})</span>
            </div>
          </div>
          <div class="player-stats-row">
            <img class="stat-icon" src="assets/items/hourglass.webp" alt="Level" />
            <div>Level {{ currentCharacter.level }}<br>XP: {{ currentCharacter.experience }}</div>
          </div>
          <div class="player-stats-row">
            <img class="stat-icon" src="assets/items/life.webp" alt="Life" />
            <div>Life: {{ currentCharacter.life }} / {{ currentCharacter.maxLife }}</div>
          </div>
          <div class="player-stats-row">
            <img class="stat-icon" src="assets/items/mana.webp" alt="Mana" />
            <div>Mana: {{ currentCharacter.mana }} / {{ currentCharacter.maxMana }}</div>
          </div>
          <div class="player-stats-row">
            <img class="stat-icon" src="assets/items/gold.webp" alt="Gold" />
            <div>Gold: <span class="gold-amount">{{ currentCharacter.gold }}</span></div>
          </div>
        </div>
      </ng-container>
      <ng-template #noChar>
        <div>No character loaded.</div>
      </ng-template>
    </div>
  </div>

  <!-- Map (Center/Second) -->
  <div class="main-section map" [ngClass]="{'collapsed': !isMapOpen}" [style.grid-area]="mapArea">
    <button class="collapsible-header" (click)="toggleMap()">Map</button>
    <div class="section-content" *ngIf="isMapOpen">
      <span>Map Placeholder</span>
    </div>
  </div>

  <!-- Tile Actions (Right/Third) -->
  <div class="main-section tile-actions" [ngClass]="{'collapsed': !isTileActionsOpen}" [style.grid-area]="tileActionsArea">
    <button class="collapsible-header" (click)="toggleTileActions()">Tile Actions</button>
    <div class="section-content" *ngIf="isTileActionsOpen">
      <span>Tile Actions Placeholder</span>
    </div>
  </div>

  <!-- Menu (Bottom/Last) -->
  <div class="main-section menu" [ngClass]="{'collapsed': !isMenuOpen}" [style.grid-area]="menuArea">
    <button class="collapsible-header" (click)="toggleMenu()">Menu</button>
    <div class="section-content" *ngIf="isMenuOpen">
      <span>Menu Placeholder</span>
    </div>
  </div>
</div>
